language: python
python:
- '3.6'
- 3.6-dev
install:
- pip install pipenv
- pipenv install --dev
before_script:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
script:
- pipenv run black --check .
- pipenv run isort --check-only
- find . -iname "*.py" | xargs pipenv run pylint
- pipenv run coverage run --source=faker_microservice tests.py
- pipenv run coverage xml
after_script:
- "./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"
deploy:
  provider: pypi
  user: craiga
  password:
    secure: VDbhyPzpbIE0UhtekH4EefPqlhi2fxArsRt8Dqcj9NeTqTmhrCPYjc6AvMebX90oCo2ofPALnpBH3c3Mk9MYn6TbxS9lVJXVCDuAvvgFwCZVeNgER54unbzpk+iCBBbOf9J7dRp7wXi+jwxLcVJ72ZuOKFLfsDglOJjbd1yy28i1CoqJ/2p7013odMH139DArZgAu/sjH4oeMF14vDbYbms+SuYNkU86x9B7wVibRHyd1lUpZuJfHYuL16tZDz3J3VdsTfxPB9FVb4VoovnK0lT1NZ/PGrOXy7kuQ83tCfIi2a6BvelLOjCtURzpXheFP3xJZaASXEdOzbHiPW4oS5uG9DDjhk2ac5oNu+tT7WHdjdOV6f2JBqkaQcyrUatvSY5gPKDQEyCMHVDNqMk7IvLM7s1kP2Vu0Yn62dF2pZ7lAw84tsJP+aIjzSfcUfZ+zc8FeWGaX0O3HqMVZlqVJvH+p0XuUvvToBmIL6cIrnwat3aO9IxBm3M4ntDYd/LfsQt4zb6yU1S2a3YlDmF64b7xHGt/AATH1B+jedQOlapsmQdmuFUQW3kqypc+xmQCft5s8cUomeJref0RYyTrqcLY9PPjhMOfwhZXIlIjuSmCdh2TkHPoTqyqXWGX29O9JbrcXGHwGuGfG4YYreUYnz/+jO/kNs9LnHPKiNqX0bw=
  skip_existing: true
  on:
    tags: true
